name: Minimal API Workflow

on:
 workflow_dispatch:
 push:
  branches: ['master']   

jobs:
 build:
  runs-on: ubuntu-latest
  
  steps:
   - uses: actions/checkout@v4
  
   - name: Setup .Net
     uses: actions/setup-dotnet@v4
     with:
      dotnet-version: 8.0.x

   - name: Restore Dependencies
     run: dotnet restore

   - id: build
     name: Build
     run: dotnet build --no-restore

   - id: test
     if: steps.build.outcomw == 'success'
     name: Test
     run: dotnet test "MinimalApiDemoTests/MinimalApiDemoTests.csproj" --no-build"
      